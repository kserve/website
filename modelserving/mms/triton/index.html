
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="KServe Documentation">
      
      
      
      
        <link rel="canonical" href="https://kserve.io/docs/modelserving/mms/triton/">
      
      <link rel="icon" href="../../../images/favicon/favicon-32x32.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.4">
    
    
      
        <title>Triton inference server - KServe Documentation Website</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bde7dde4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#multi-model-serving-with-tritonalpha" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-announce">
          <div class="md-announce__inner md-grid md-typeset">
            
 <h1>
 This Website is Under Construction
 </h1>

          </div>
        </aside>
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="KServe Documentation Website" class="md-header__button md-logo" aria-label="KServe Documentation Website" data-md-component="logo">
      
  <img src="../../../images/logo/kserve.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KServe Documentation Website
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Triton inference server
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/kserve/website/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../get_started/" class="md-tabs__link">
        Getting started
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../admin/serverless/" class="md-tabs__link">
        Administration Guide
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../control_plane/" class="md-tabs__link md-tabs__link--active">
        User Guide
      </a>
    </li>
  

  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../reference/api/" class="md-tabs__link">
        API Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../developer/developer/" class="md-tabs__link">
        Developer Guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../community/adopters/" class="md-tabs__link">
        Community
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="KServe Documentation Website" class="md-nav__button md-logo" aria-label="KServe Documentation Website" data-md-component="logo">
      
  <img src="../../../images/logo/kserve.png" alt="logo">

    </a>
    KServe Documentation Website
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/kserve/website/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Getting started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../get_started/" class="md-nav__link">
        KServe Quickstart
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../get_started/first_isvc/" class="md-nav__link">
        First InferenceService
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Administration Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Administration Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Administration Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      <label class="md-nav__link" for="__nav_3_1">
        Install KServe
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Install KServe" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Install KServe
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/serverless/" class="md-nav__link">
        Serverless installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/kubernetes_deployment.md" class="md-nav__link">
        Kubernetes deployment installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/modelmesh.md" class="md-nav__link">
        ModelMesh installation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        KServe Configurations
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="KServe Configurations" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          KServe Configurations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/config.md" class="md-nav__link">
        InferenceService configuration
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      <label class="md-nav__link" for="__nav_3_3">
        KServe Observability
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="KServe Observability" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          KServe Observability
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/logging.md" class="md-nav__link">
        Logging
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/metrics.md" class="md-nav__link">
        Metrics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/dt.md" class="md-nav__link">
        Distributed Tracing
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        User Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      <label class="md-nav__link" for="__nav_4_1">
        Concepts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Concepts" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_1" type="checkbox" id="__nav_4_1_1" >
      
      <label class="md-nav__link" for="__nav_4_1_1">
        Control Plane
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Control Plane" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_1_1">
          <span class="md-nav__icon md-icon"></span>
          Control Plane
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../control_plane/" class="md-nav__link">
        Model Serving Control Plane
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../modelmesh_control_plane.md" class="md-nav__link">
        ModelMesh Control Plane
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_2" type="checkbox" id="__nav_4_1_2" >
      
      <label class="md-nav__link" for="__nav_4_1_2">
        Data Plane
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Plane" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_1_2">
          <span class="md-nav__icon md-icon"></span>
          Data Plane
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data_plane/" class="md-nav__link">
        Model Serving Data Plane
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../inference_api/" class="md-nav__link">
        V2 Inference Protocol
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        Single Model Serving
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Single Model Serving" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Single Model Serving
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/tensorflow/" class="md-nav__link">
        Tensorflow
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/torchserve/" class="md-nav__link">
        PyTorch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/sklearn/v2/" class="md-nav__link">
        scikit-learn
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/xgboost/" class="md-nav__link">
        XGBoost
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/pmml/" class="md-nav__link">
        PMML
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/lightgbm/" class="md-nav__link">
        Lightgbm
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/paddle/" class="md-nav__link">
        PaddleServer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/custom/custom_model/" class="md-nav__link">
        How to write a custom predictor
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" checked>
      
      <label class="md-nav__link" for="__nav_4_3">
        Multi Model Serving
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Multi Model Serving" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Multi Model Serving
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../multi-model-serving/" class="md-nav__link">
        Concept
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3_2" type="checkbox" id="__nav_4_3_2" checked>
      
      <label class="md-nav__link" for="__nav_4_3_2">
        Model Server Runtime
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Model Server Runtime" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_3_2">
          <span class="md-nav__icon md-icon"></span>
          Model Server Runtime
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Triton inference server
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Triton inference server
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-hosting-inferenceservice" class="md-nav__link">
    Create the hosting InferenceService
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-trained-model" class="md-nav__link">
    Deploy Trained Model
  </a>
  
    <nav class="md-nav" aria-label="Deploy Trained Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-cifar10-torchscript-model" class="md-nav__link">
    Deploy Cifar10 TorchScript Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-simple-string-tensorflow-model" class="md-nav__link">
    Deploy Simple String Tensorflow Model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-performance-test" class="md-nav__link">
    Run Performance Test
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#homogeneous-model-allocation-and-autoscaling" class="md-nav__link">
    Homogeneous model allocation and Autoscaling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-trained-models" class="md-nav__link">
    Delete Trained Models
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sklearn/" class="md-nav__link">
        scikit-learn
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      <label class="md-nav__link" for="__nav_4_4">
        Transformers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Transformers" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Transformers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/transformer/feast/" class="md-nav__link">
        Feast
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../v1beta1/transformer/torchserve_image_transformer/" class="md-nav__link">
        How to write a custom transformer
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      <label class="md-nav__link" for="__nav_4_5">
        Storage
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Storage" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Storage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/azure/azure/" class="md-nav__link">
        Azure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/pvc/pvc/" class="md-nav__link">
        PVC
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/s3/s3/" class="md-nav__link">
        S3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/uri/uri/" class="md-nav__link">
        URI
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" type="checkbox" id="__nav_4_6" >
      
      <label class="md-nav__link" for="__nav_4_6">
        Explainers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Explainers" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Explainers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explainer/explainer/" class="md-nav__link">
        Concept
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_2" type="checkbox" id="__nav_4_6_2" >
      
      <label class="md-nav__link" for="__nav_4_6_2">
        Alibi Explainer
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Alibi Explainer" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_6_2">
          <span class="md-nav__icon md-icon"></span>
          Alibi Explainer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explainer/alibi/cifar10/" class="md-nav__link">
        Image Explainer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explainer/alibi/income/" class="md-nav__link">
        Income Explainer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explainer/alibi/moviesentiment/" class="md-nav__link">
        Text Explainer
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explainer/aix/mnist/aix/" class="md-nav__link">
        AIX Explainer
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7" type="checkbox" id="__nav_4_7" >
      
      <label class="md-nav__link" for="__nav_4_7">
        Detectors
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Detectors" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_7">
          <span class="md-nav__icon md-icon"></span>
          Detectors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../detect/alibi_detect/alibi_detect/" class="md-nav__link">
        Alibi Detector
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../detect/aif/germancredit/" class="md-nav__link">
        AIF Bias Detector
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../detect/art/mnist/" class="md-nav__link">
        ART Adversial Detector
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        API Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/api/" class="md-nav__link">
        Control Plane API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../sdk_docs/sdk_doc/" class="md-nav__link">
        Python Client SDK
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Developer Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Developer Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/developer/" class="md-nav__link">
        How to contribute
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/debug.md" class="md-nav__link">
        Debugging guide
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Community
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Community" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/adopters/" class="md-nav__link">
        Adopters
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/roadmap.md" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/presentations.md" class="md-nav__link">
        Demos and Presentations
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-hosting-inferenceservice" class="md-nav__link">
    Create the hosting InferenceService
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-trained-model" class="md-nav__link">
    Deploy Trained Model
  </a>
  
    <nav class="md-nav" aria-label="Deploy Trained Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-cifar10-torchscript-model" class="md-nav__link">
    Deploy Cifar10 TorchScript Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-simple-string-tensorflow-model" class="md-nav__link">
    Deploy Simple String Tensorflow Model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-performance-test" class="md-nav__link">
    Run Performance Test
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#homogeneous-model-allocation-and-autoscaling" class="md-nav__link">
    Homogeneous model allocation and Autoscaling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-trained-models" class="md-nav__link">
    Delete Trained Models
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/kserve/website/edit/mkdocs/docs/modelserving/mms/triton/README.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="multi-model-serving-with-tritonalpha">Multi Model Serving with Triton(Alpha)<a class="headerlink" href="#multi-model-serving-with-tritonalpha" title="Permanent link">&para;</a></h1>
<p>There are growing use cases of developing per-user or per-category ML models instead of cohort model. For example a news classification service trains custom model based on each news category,
a recommendation model trains on each user's usage history to personalize the recommendation. </p>
<p>While you get the benefit of better inference accuracy by building models for each use case, 
the cost of deploying models increase significantly because you may train anywhere from hundreds to thousands of custom models, and it becomes difficult to manage so many models on production.
These challenges become more pronounced when you don’t access all models at the same time but still need them to be available at all times.
KServe multi model serving design addresses these issues and gives a scalable yet cost-effective solution to deploy multiple models.</p>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<ol>
<li>Skip <a href="https://knative.dev/docs/serving/tag-resolution/">tag resolution</a> for <code>nvcr.io</code> which requires auth to resolve triton inference server image digest
<div class="highlight"><pre><span></span><code>kubectl patch cm config-deployment --patch <span class="s1">&#39;{&quot;data&quot;:{&quot;registriesSkippingTagResolving&quot;:&quot;nvcr.io&quot;}}&#39;</span> -n knative-serving
</code></pre></div></li>
<li>Increase progress deadline since pulling triton image and big bert model may longer than default timeout for 120s, this setting requires knative 0.15.0+
<div class="highlight"><pre><span></span><code>kubectl patch cm config-deployment --patch <span class="s1">&#39;{&quot;data&quot;:{&quot;progressDeadline&quot;: &quot;600s&quot;}}&#39;</span> -n knative-serving
</code></pre></div></li>
</ol>
<h2 id="create-the-hosting-inferenceservice">Create the hosting InferenceService<a class="headerlink" href="#create-the-hosting-inferenceservice" title="Permanent link">&para;</a></h2>
<p>KServe <code>Multi Model Serving</code> design decouples the trained model artifact from the hosting <code>InferenceService</code>. You first create a hosting <code>InferenceService</code> without <code>StoragegUri</code>
and then deploy multiple <code>TrainedModel</code> CRs onto the designated <code>InferenceService</code>.</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="s">&quot;serving.kserve.io/v1beta1&quot;</span>
<span class="nt">kind</span><span class="p">:</span> <span class="s">&quot;InferenceService&quot;</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;triton-mms&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">predictor</span><span class="p">:</span>
    <span class="nt">triton</span><span class="p">:</span>
      <span class="nt">args</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">--log-verbose=1</span>     
      <span class="nt">resources</span><span class="p">:</span>
        <span class="nt">limits</span><span class="p">:</span>
          <span class="nt">cpu</span><span class="p">:</span> <span class="s">&quot;1&quot;</span>
          <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2Gi</span>
        <span class="nt">requests</span><span class="p">:</span>
          <span class="nt">cpu</span><span class="p">:</span> <span class="s">&quot;1&quot;</span>
          <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2Gi</span>
</code></pre></div>
Note that you create the hosting <code>InferenceService</code> with enough memory resource for hosting multiple models.</p>
<p><div class="highlight"><pre><span></span><code>kubectl apply -f multi_model_triton.yaml
</code></pre></div>
Check the <code>InferenceService</code> status</p>
<div class="highlight"><pre><span></span><code>kubectl get isvc triton-mms
NAME         URL                                     READY   PREV   LATEST   PREVROLLEDOUTREVISION   LATESTREADYREVISION                  AGE
triton-mms   http://triton-mms.default.example.com   True           <span class="m">100</span>                              triton-mms-predictor-default-00001   23h
</code></pre></div>
<h2 id="deploy-trained-model">Deploy Trained Model<a class="headerlink" href="#deploy-trained-model" title="Permanent link">&para;</a></h2>
<p>Now you have an <code>InferenceService</code> running with 2Gi memory but no model is deployed on <code>InferenceService</code> yet, let's deploy the trained models on <code>InferenceService</code> 
by applying the <code>TrainedModel</code> CRs.</p>
<p>On <code>TrainedModel</code> CR you specify the following fields:
- Hosting <code>InferenceService</code>: The <code>InferenceService</code> you want the trained model to deploy to.
- Model framework: the ML framework you trained with, the trained model validation webhook validates the framework if it is supported by the model server in this case <code>Triton Inference Server</code>.
- Estimated model memory resource: the trained model validation webhook validates that the summed memory of all trained models do no exceed the parent <code>InferenceService</code> memory limit.  </p>
<h3 id="deploy-cifar10-torchscript-model">Deploy Cifar10 TorchScript Model<a class="headerlink" href="#deploy-cifar10-torchscript-model" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="s">&quot;serving.kserve.io/v1alpha1&quot;</span>
<span class="nt">kind</span><span class="p">:</span> <span class="s">&quot;TrainedModel&quot;</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;cifar10&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">inferenceService</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">triton-mms</span>
  <span class="nt">model</span><span class="p">:</span>
    <span class="nt">framework</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pytorch</span>
    <span class="nt">storageUri</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gs://kfserving-examples/models/torchscript/cifar10</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1Gi</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl apply -f trained_model.yaml
</code></pre></div>
<p>After <code>TrainedModel</code> CR is applied, check the model agent sidecar logs, the model agent downloads the model from specified <code>StorageUri</code> to the mounted
model repository and then calls the load endpoint of <code>Triton Inference Server</code>.
<div class="highlight"><pre><span></span><code>kubectl logs triton-mms-predictor-default-2g8lg-deployment-69c9964bc4-mfg92 agent

<span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;ts&quot;</span>:1621717148.93849,<span class="s2">&quot;logger&quot;</span>:<span class="s2">&quot;fallback-logger&quot;</span>,<span class="s2">&quot;caller&quot;</span>:<span class="s2">&quot;agent/watcher.go:173&quot;</span>,<span class="s2">&quot;msg&quot;</span>:<span class="s2">&quot;adding model cifar10&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;ts&quot;</span>:1621717148.939014,<span class="s2">&quot;logger&quot;</span>:<span class="s2">&quot;fallback-logger&quot;</span>,<span class="s2">&quot;caller&quot;</span>:<span class="s2">&quot;agent/puller.go:136&quot;</span>,<span class="s2">&quot;msg&quot;</span>:<span class="s2">&quot;Worker is started for cifar10&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;ts&quot;</span>:1621717148.9393005,<span class="s2">&quot;logger&quot;</span>:<span class="s2">&quot;fallback-logger&quot;</span>,<span class="s2">&quot;caller&quot;</span>:<span class="s2">&quot;agent/puller.go:144&quot;</span>,<span class="s2">&quot;msg&quot;</span>:<span class="s2">&quot;Downloading model from gs://kfserving-examples/models/torchscript/cifar10&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;ts&quot;</span>:1621717148.939781,<span class="s2">&quot;logger&quot;</span>:<span class="s2">&quot;fallback-logger&quot;</span>,<span class="s2">&quot;caller&quot;</span>:<span class="s2">&quot;agent/downloader.go:48&quot;</span>,<span class="s2">&quot;msg&quot;</span>:<span class="s2">&quot;Downloading gs://kfserving-examples/models/torchscript/cifar10 to model dir /mnt/models&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;ts&quot;</span>:1621717149.4635677,<span class="s2">&quot;logger&quot;</span>:<span class="s2">&quot;fallback-logger&quot;</span>,<span class="s2">&quot;caller&quot;</span>:<span class="s2">&quot;agent/downloader.go:68&quot;</span>,<span class="s2">&quot;msg&quot;</span>:<span class="s2">&quot;Creating successFile /mnt/models/cifar10/SUCCESS.71f376a9daa07a04ae1bd52cbe7f3a2c46ceb701350d9dffc73381df5a230923&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;ts&quot;</span>:1621717149.6402793,<span class="s2">&quot;logger&quot;</span>:<span class="s2">&quot;fallback-logger&quot;</span>,<span class="s2">&quot;caller&quot;</span>:<span class="s2">&quot;agent/puller.go:161&quot;</span>,<span class="s2">&quot;msg&quot;</span>:<span class="s2">&quot;Successfully loaded model cifar10&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;info&quot;</span>,<span class="s2">&quot;ts&quot;</span>:1621717149.6404483,<span class="s2">&quot;logger&quot;</span>:<span class="s2">&quot;fallback-logger&quot;</span>,<span class="s2">&quot;caller&quot;</span>:<span class="s2">&quot;agent/puller.go:129&quot;</span>,<span class="s2">&quot;msg&quot;</span>:<span class="s2">&quot;completion event for model cifar10, in flight ops 0&quot;</span><span class="o">}</span>
</code></pre></div></p>
<p>Check the <code>Triton Inference Service</code> log you will see that the model is loaded into the memory.
<div class="highlight"><pre><span></span><code>I0522 <span class="m">20</span>:59:09.469834 <span class="m">1</span> model_repository_manager.cc:737<span class="o">]</span> loading: cifar10:1
I0522 <span class="m">20</span>:59:09.471278 <span class="m">1</span> libtorch_backend.cc:217<span class="o">]</span> Creating instance cifar10_0_0_cpu on CPU using model.pt
I0522 <span class="m">20</span>:59:09.638318 <span class="m">1</span> model_repository_manager.cc:925<span class="o">]</span> successfully loaded <span class="s1">&#39;cifar10&#39;</span> version <span class="m">1</span>
</code></pre></div></p>
<p>Check the <code>TrainedModel</code> CR status
<div class="highlight"><pre><span></span><code>kubectl get tm cifar10  
NAME      URL                                                             READY   AGE
cifar10   http://triton-mms.default.example.com/v2/models/cifar10/infer   True    3h45m

<span class="c1"># to show more detailed status</span>
kubectl get tm cifar10 -oyaml
status:
  address:
    url: http://triton-mms.default.svc.cluster.local/v2/models/cifar10/infer
  conditions:
  - lastTransitionTime: <span class="s2">&quot;2021-05-22T20:56:12Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: FrameworkSupported
  - lastTransitionTime: <span class="s2">&quot;2021-05-22T20:56:12Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: InferenceServiceReady
  - lastTransitionTime: <span class="s2">&quot;2021-05-22T20:56:12Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: IsMMSPredictor
  - lastTransitionTime: <span class="s2">&quot;2021-05-22T20:58:56Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: MemoryResourceAvailable
  - lastTransitionTime: <span class="s2">&quot;2021-05-22T20:58:56Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: Ready
  url: http://triton-mms.default.example.com/v2/models/cifar10/infer
</code></pre></div></p>
<blockquote>
<p><img alt="⚠" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/26a0.svg" title=":warning:" /> Currently the trained model CR does not reflect download and load/unload status, it has been worked on in
the issue for adding the <a href="https://github.com/kserve/kserve/issues/1045">probing component</a>.</p>
</blockquote>
<p>Now you can curl the model metadata endpoint
<div class="highlight"><pre><span></span><code><span class="nv">MODEL_NAME</span><span class="o">=</span>cifar10
<span class="nv">SERVICE_HOSTNAME</span><span class="o">=</span><span class="k">$(</span>kubectl get inferenceservices triton-mms -o <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.url}&#39;</span> <span class="p">|</span> cut -d <span class="s2">&quot;/&quot;</span> -f <span class="m">3</span><span class="k">)</span>

curl -H <span class="s2">&quot;Host: </span><span class="si">${</span><span class="nv">SERVICE_HOSTNAME</span><span class="si">}</span><span class="s2">&quot;</span> http://<span class="si">${</span><span class="nv">INGRESS_HOST</span><span class="si">}</span>:<span class="si">${</span><span class="nv">INGRESS_PORT</span><span class="si">}</span>/v2/models/<span class="nv">$MODEL_NAME</span>

<span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;cifar10&quot;</span>,<span class="s2">&quot;versions&quot;</span>:<span class="o">[</span><span class="s2">&quot;1&quot;</span><span class="o">]</span>,<span class="s2">&quot;platform&quot;</span>:<span class="s2">&quot;pytorch_libtorch&quot;</span>,<span class="s2">&quot;inputs&quot;</span>:<span class="o">[{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;INPUT__0&quot;</span>,<span class="s2">&quot;datatype&quot;</span>:<span class="s2">&quot;FP32&quot;</span>,<span class="s2">&quot;shape&quot;</span>:<span class="o">[</span>-1,3,32,32<span class="o">]}]</span>,<span class="s2">&quot;outputs&quot;</span>:<span class="o">[{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;OUTPUT__0&quot;</span>,<span class="s2">&quot;datatype&quot;</span>:<span class="s2">&quot;FP32&quot;</span>,<span class="s2">&quot;shape&quot;</span>:<span class="o">[</span>-1,10<span class="o">]}]}</span>
</code></pre></div></p>
<h3 id="deploy-simple-string-tensorflow-model">Deploy Simple String Tensorflow Model<a class="headerlink" href="#deploy-simple-string-tensorflow-model" title="Permanent link">&para;</a></h3>
<p>Next let's deploy another model to the same <code>InferenceService</code>.</p>
<blockquote>
<p><img alt="⚠" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/26a0.svg" title=":warning:" /> The TrainModel resource name must be the same as the model name specified in triton model configuration.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="s">&quot;serving.kserve.io/v1alpha1&quot;</span>
<span class="nt">kind</span><span class="p">:</span> <span class="s">&quot;TrainedModel&quot;</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;simple-string&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">inferenceService</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">triton-mms</span>
  <span class="nt">model</span><span class="p">:</span>
    <span class="nt">framework</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tensorflow</span>
    <span class="nt">storageUri</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gs://kfserving-examples/models/tensorrt/simple_string</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1Gi</span>
</code></pre></div>
<p>Check the <code>Triton Inference Service</code> log you will see that the <code>simple-string</code> model is also loaded into the memory.
<div class="highlight"><pre><span></span><code>I0523 <span class="m">00</span>:04:19.298966 <span class="m">1</span> model_repository_manager.cc:737<span class="o">]</span> loading: simple-string:1
I0523 <span class="m">00</span>:04:20.367808 <span class="m">1</span> tensorflow.cc:1281<span class="o">]</span> Creating instance simple-string on CPU using model.graphdef
I0523 <span class="m">00</span>:04:20.497748 <span class="m">1</span> model_repository_manager.cc:925<span class="o">]</span> successfully loaded <span class="s1">&#39;simple-string&#39;</span> version <span class="m">1</span>
</code></pre></div></p>
<p>Check the <code>TrainedModel</code> CR status
<div class="highlight"><pre><span></span><code>kubectl get tm simple-string
NAME            URL                                                                   READY   AGE
simple-string   http://triton-mms.default.example.com/v2/models/simple-string/infer   True    20h

<span class="c1"># to show more detailed status</span>
kubectl get tm cifar10 -oyaml
status:
  address:
    url: http://triton-mms.default.svc.cluster.local/v2/models/simple-string/infer
  conditions:
  - lastTransitionTime: <span class="s2">&quot;2021-05-23T00:02:42Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: FrameworkSupported
  - lastTransitionTime: <span class="s2">&quot;2021-05-23T00:02:42Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: InferenceServiceReady
  - lastTransitionTime: <span class="s2">&quot;2021-05-23T00:02:42Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: IsMMSPredictor
  - lastTransitionTime: <span class="s2">&quot;2021-05-23T00:02:42Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: MemoryResourceAvailable
  - lastTransitionTime: <span class="s2">&quot;2021-05-23T00:02:42Z&quot;</span>
    status: <span class="s2">&quot;True&quot;</span>
    type: Ready
  url: http://triton-mms.default.example.com/v2/models/simple-string/infer
</code></pre></div></p>
<p>Now you can curl the <code>simple-string</code> model metadata endpoint
<div class="highlight"><pre><span></span><code><span class="nv">MODEL_NAME</span><span class="o">=</span>simple-string
<span class="nv">SERVICE_HOSTNAME</span><span class="o">=</span><span class="k">$(</span>kubectl get inferenceservices triton-mms -o <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.url}&#39;</span> <span class="p">|</span> cut -d <span class="s2">&quot;/&quot;</span> -f <span class="m">3</span><span class="k">)</span>

curl -H <span class="s2">&quot;Host: </span><span class="si">${</span><span class="nv">SERVICE_HOSTNAME</span><span class="si">}</span><span class="s2">&quot;</span> http://<span class="si">${</span><span class="nv">INGRESS_HOST</span><span class="si">}</span>:<span class="si">${</span><span class="nv">INGRESS_PORT</span><span class="si">}</span>/v2/models/<span class="nv">$MODEL_NAME</span>

<span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;simple-string&quot;</span>,<span class="s2">&quot;versions&quot;</span>:<span class="o">[</span><span class="s2">&quot;1&quot;</span><span class="o">]</span>,<span class="s2">&quot;platform&quot;</span>:<span class="s2">&quot;tensorflow_graphdef&quot;</span>,<span class="s2">&quot;inputs&quot;</span>:<span class="o">[{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;INPUT0&quot;</span>,<span class="s2">&quot;datatype&quot;</span>:<span class="s2">&quot;BYTES&quot;</span>,<span class="s2">&quot;shape&quot;</span>:<span class="o">[</span>-1,16<span class="o">]}</span>,<span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;INPUT1&quot;</span>,<span class="s2">&quot;datatype&quot;</span>:<span class="s2">&quot;BYTES&quot;</span>,<span class="s2">&quot;shape&quot;</span>:<span class="o">[</span>-1,16<span class="o">]}]</span>,<span class="s2">&quot;outputs&quot;</span>:<span class="o">[{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;OUTPUT0&quot;</span>,<span class="s2">&quot;datatype&quot;</span>:<span class="s2">&quot;BYTES&quot;</span>,<span class="s2">&quot;shape&quot;</span>:<span class="o">[</span>-1,16<span class="o">]}</span>,<span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;OUTPUT1&quot;</span>,<span class="s2">&quot;datatype&quot;</span>:<span class="s2">&quot;BYTES&quot;</span>,<span class="s2">&quot;shape&quot;</span>:<span class="o">[</span>-1,16<span class="o">]}]}</span>
</code></pre></div></p>
<h2 id="run-performance-test">Run Performance Test<a class="headerlink" href="#run-performance-test" title="Permanent link">&para;</a></h2>
<p>The performance job runs vegeta load testing to the <code>MultiModelInferenceService</code> with model <code>cifar10</code>.
<div class="highlight"><pre><span></span><code>kubectl create -f perf.yaml
Requests      <span class="o">[</span>total, rate, throughput<span class="o">]</span>         <span class="m">600</span>, <span class="m">10</span>.02, <span class="m">10</span>.01
Duration      <span class="o">[</span>total, attack, wait<span class="o">]</span>             <span class="m">59</span>.912s, <span class="m">59</span>.9s, <span class="m">11</span>.755ms
Latencies     <span class="o">[</span>min, mean, <span class="m">50</span>, <span class="m">90</span>, <span class="m">95</span>, <span class="m">99</span>, max<span class="o">]</span>  <span class="m">5</span>.893ms, <span class="m">11</span>.262ms, <span class="m">10</span>.252ms, <span class="m">16</span>.077ms, <span class="m">18</span>.804ms, <span class="m">26</span>.745ms, <span class="m">39</span>.202ms
Bytes In      <span class="o">[</span>total, mean<span class="o">]</span>                     <span class="m">189000</span>, <span class="m">315</span>.00
Bytes Out     <span class="o">[</span>total, mean<span class="o">]</span>                     <span class="m">66587400</span>, <span class="m">110979</span>.00
Success       <span class="o">[</span>ratio<span class="o">]</span>                           <span class="m">100</span>.00%
Status Codes  <span class="o">[</span>code:count<span class="o">]</span>                      <span class="m">200</span>:600  
Error Set:
</code></pre></div></p>
<h2 id="homogeneous-model-allocation-and-autoscaling">Homogeneous model allocation and Autoscaling<a class="headerlink" href="#homogeneous-model-allocation-and-autoscaling" title="Permanent link">&para;</a></h2>
<p>The current MMS implementation uses the homogeneous approach meaning that each <code>InferenceService</code> replica holds the same
set of models. Autoscaling is based on the aggregated traffic for this set of models NOT the request volume for individual
model, this set of models is always scaled up together. The downside of this approach is that traffic spike for one model
can result in scaling out entire set of models despite the low request volume for other models hosted on the same <code>InferenceService</code>,
this may not be desirable for <code>InferenceService</code> that hosts a set of big models. The other approach is to use the heterogeneous
allocation where each replica can host a different set of models, models are scaled up/down individually based on its own
traffic and in this way it ensures better resource utilization.</p>
<h2 id="delete-trained-models">Delete Trained Models<a class="headerlink" href="#delete-trained-models" title="Permanent link">&para;</a></h2>
<p>To remove the resources, run the command <code>kubectl delete inferenceservice triton-mms</code>. 
This will delete the inference service and result in the trained models deleted. To delete individual <code>TrainedModel</code> you
can run the command <code>kubectl delete tm $MODEL_NAME</code>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" title="Back to top" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../multi-model-serving/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Concept
            </div>
          </div>
        </a>
      
      
        <a href="../sklearn/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              scikit-learn
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright © 2021 The KServe Authors
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://github.com/kserve/community" target="_blank" rel="noopener" title="KServe Community on Github" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
      <a href="https://kubeflow.slack.com/join/shared_invite/zt-n73pfj05-l206djXlXk5qdQKs4o1Zkg#" target="_blank" rel="noopener" title="Slack" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tracking", "navigation.tabs.sticky", "navigation.indexes", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.4fa0e4ee.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.1d3bfcf1.min.js"></script>
      
    
  </body>
</html>